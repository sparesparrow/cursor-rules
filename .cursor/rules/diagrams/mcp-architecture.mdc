---
description: High-level architecture diagram for Model Context Protocol
---

# MCP Architecture Overview

## Component Relationships

```mermaid
graph TB
    subgraph Client ["Client Layer"]
        C[MCP Client]
        TR[Transport]
        RH[Resource Handler]
        TH[Tool Handler]
        PH[Prompt Handler]
    end

    subgraph Server ["Server Layer"]
        S[MCP Server]
        RM[Resource Manager]
        TM[Tool Manager]
        PM[Prompt Manager]
    end

    subgraph Integration ["Integration Layer"]
        IC[Integration Client]
        IS[Integration Server]
        Cache[Resource Cache]
        Stream[Resource Streamer]
    end

    C --> TR
    TR --> S
    C --> RH
    C --> TH
    C --> PH
    
    S --> RM
    S --> TM
    S --> PM
    
    RH --> Cache
    RH --> Stream
    
    IC --> IS
    IS --> RM
    IS --> TM
    IS --> PM

    style Client fill:#e1f3d8
    style Server fill:#ffd7d7
    style Integration fill:#d7e3ff
```

## Transport Flow

```mermaid
sequenceDiagram
    participant C as Client
    participant T as Transport
    participant S as Server
    participant H as Handlers

    C->>T: Connect
    T->>S: Establish Connection
    S->>T: Connection Accepted
    T->>C: Connected

    C->>T: Request Resource
    T->>S: Forward Request
    S->>H: Process Request
    H->>S: Return Result
    S->>T: Send Response
    T->>C: Deliver Response
```

## Resource Lifecycle

```mermaid
stateDiagram-v2
    [*] --> Requested
    Requested --> Fetching
    Fetching --> Cached
    Cached --> Streaming
    Streaming --> Updated
    Updated --> Cached
    Cached --> Invalidated
    Invalidated --> Fetching
    Cached --> [*]
``` 